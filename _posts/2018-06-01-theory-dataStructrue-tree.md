---
layout: post
title: '常用数据结构-树'
subtitle: '二叉树，完全二叉树，平衡二叉树，二叉查找树，红黑树，B+ B- B*,LSM树的原理'
date: 2018-06-07
categories: 数据结构
author: yates
cover: ''
tags: 树
---

前言
我们在平时的生产过程中，都知道涉及查询多的数据使用数组结构，涉及插入，删除操作多的数据使用链表结构，那么有没有一种兼顾两种的数据结构了，那么就是**二叉树**

###二叉树

二叉树结构：
![此处输入图片的描述](http://www.muyibeyond.cn/img/2018-06-07-theory-dataStructrue-tree/1.jpg)

二叉树定义：
- 所有节点最多有两个子节点
- 所有节点最多有一个父节点
- 有且只有一个根节点

### 完全二叉树

- 若设二叉树的深度为h，除第h层外，其它各层的结点数都达到最大个数，第h层所有的结点都连续集中在最左边

### 二叉查找树

- 具有二叉特性
- 所有节点的左节点小于该节点，右节点大于该节点
- 所有节点左右子树也是二叉查找树
- 没有节点值相同节点


### 平衡二叉树

平衡二叉树定义：
- 具有二叉查找树特性
- 左右两个子树的高度差的绝对值不超过1（插入或删除节点，需要对节点进行旋转）

**旋转操作**
单旋转-双旋转


### 红黑树
- 是一个具有特点的平衡二叉树（为了保持平衡需要不断旋转节点，代价可能太高）
- 节点是红色或者是黑色
- 根节点是黑色
- 每个叶节点（NIL或空节点）是黑色
- 每个红色节点的两个子节点都是黑色的
- 从任一节点到其每个叶节点的所有路径都包含相同数目的黑色节点
- 旋转操作为了保证上述特征


### B树（是一种多路搜索树，下面m指的是m阶B树）
- 树中每个结点最多含有m个孩子（m>=2）
- 除根结点和叶子结点外，其它每个结点至少有[ceil(m / 2)]个孩子 [M/2, M]
- 根结点至少有2个孩子 [2, M]
- 所有叶子结点都出现在同一层，叶子结点不包含任何关键字信息
- 每个非根节点所包含的关键字个数 j 满足：（m/2） - 1 <= j <= m - 1
- 除根结点以外的所有结点（不包括叶子结点）的度数正好是关键字总数加1，故内部子树个数 k 满足：（m/2） <= k <= m 
- 非叶子结点的关键字个数=指向儿子的指针个数-1
- 非叶子结点的关键字：K[1], K[2], …, K[M-1]；且K[i] < K[i+1]
- 非叶子结点的指针：P[1], P[2], …, P[M]；其中P[1]指向关键字小于K[1]的子树，P[M]指向关键字大于K[M-1]的子树，其它P[i]指向关键字属于(K[i-1], K[i])的子树
- 所有叶子结点位于同一层


**B树的特性**

	1. 关键字集合分布在整颗树中；
	2. 任何一个关键字出现且只出现在一个结点中；
	3. 搜索有可能在非叶子结点结束；
	4. 其搜索性能等价于在关键字全集内做一次二分查找；
	5. 自动层次控制；

### B+树
- 定义
    - 有n棵子树的结点中含有n个关键字，每个关键字不保存数据，只用来索引，所有数据都保存在叶子节点
    - 所有的叶子结点中包含了全部关键字的信息，及指向含这些关键字记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接
    - 所有的非终端结点可以看成是索引部分，结点中仅含其子树（根结点）中的最大（或最小）关键字。 通常在B+树上有两个头指针，一个指向根结点，一个指向关键字最小的叶子结点 
- 与B树的差异
    - 非叶子结点的子树指针与关键字个数相同；
    - 非叶子结点的子树指针P[i]，指向关键字值属于[K[i], K[i+1])的子树
    - （B树是开区间）；
    - 为所有叶子结点增加一个链指针；
    - 所有关键字都在叶子结点出现；

- 特性
    - 所有关键字都出现在叶子结点的链表中（稠密索引），且链表中的关键字恰好是有序的；
    - 不可能在非叶子结点命中；
    - 非叶子结点相当于是叶子结点的索引（稀疏索引），叶子结点相当于是存储（关键字）数据的数据层；
    - 更适合文件索引系统；

### B*树
- 与B+树的差异
    - 是B+树的变体，在B+树的非根和非叶子结点再增加指向兄弟的指针
- 定义
    - 非叶子结点关键字个数至少为(2/3)*M，即块的最低使用率为2/3
    


### B树 B+树 B*树小结：

B树
多路搜索树，每个结点存储M/2到M个关键字，非叶子结点存储指向关键字范围的子结点；
所有关键字在整颗树中出现，且只出现一次，非叶子结点可以命中；

B+树
在B-树基础上，为叶子结点增加链表指针，所有关键字都在叶子结点
中出现，非叶子结点作为叶子结点的索引；B+树总是到叶子结点才命中；

B*树
在B+树基础上，为非叶子结点也增加链表指针，将结点的最低利用率从1/2提高到2/3；


TODO 未完待续











