---
layout: post
title: '正则表达式'
subtitle: '威力无比的正则表达式'
date: 2020-09-26
categories: 语言
author: yates
cover: 'http://cctv.com'
tags: 语言
---

## 前言

正则表表达式作为一种强大文本处理工具，可以用于执行各种复杂的文本处理和操作，并且在不同平台，不同语言都有支持。那么怎么才能用好它呢

### **为什么要克制使用？**

正则表达式功能强大，处理速度快，但是天书符咒般的写法，从软件工程的角度看来，大大降低了程序的可读性和可维护性

**能用普通字符串处理的，坚决用普通字符串处理**

字符串处理速度不见得比正则差，但可读性却好很多

**每一个正则都需要注释**

你看得懂，你的同事不一定看得懂；你现在看得懂，过一阵子，不一定还能看懂。


**多个简单正则表达式代替一个复杂正则表达式**

通过拆分，分别对多个验证条件进行验证


### **正则能做什么**

- 校验数据有效性：
- 查找符合要求文本内容
- 对文本进行切割，替换

### **正则的结构**

- **元字符：**在正则表达式中具有特殊意义的专用字符
    - **特殊单字符：** 
        - "."任意字符
        - "\d"任意数字   "\D"任意非数字
        - "\w"任意字母数字下划线  "\W"任意非字母数字下划线  
        - "\s"任意空白符   "\S"任意非空白符 
    - **空白符：**
        - "\r"回车符
        - "\n"换行符
        - "\f"换页符
        - "\t"制表符
        - "\v"垂直制表符
    - **量词：**
        - "*" 0到多次
        - "+" 1到多次
        - {m} 出现m次
        - {m,} 出现至少m次
        - {m,n} 出现m到n次
    - **范围：**
        - "|" 或
        - "[...]" 多选一，括号中任意单个元素
        - "[a-z]" a到z之间任意单个元素·
        - "[^...]" 取反，不是括号中任意单个元素


### **模式**

**贪婪模式**

表示次数的量词，默认是贪婪的，默认尽可能多的去匹配，会发生向后回溯

**非贪婪模式**

量词后面加？找出长度最小且满足要求的，会发生向前回溯

**独占模式**

尽可能多去匹配，匹配失败就结束，不会回溯；但是某些场景会不满足需求


### **分组与引用**

通过将某部分看成一个整体，在后续查找和替换中引用分组

- **分组编号：**
    - 第几个括号就是第几个分组，
    - ?: 不保存子组，不会生成编号；
    - 括号嵌套只需要看左括号的序号
    - 命名分组 ?P<名称> 正则
- **分组引用**
    - 查找重复出现的部分
    - 对原有内容格式进行改写



### **匹配模式**


**不区分大小写模式**

(?i)

**点号通配模式**
把文本当成单行进行匹配，也叫作 单行匹配，可以匹配任意字符，包括换行
(?s)

**多行模式**

进行多行匹配，通过^和&匹配上每行的开头和末尾
(?m)

**注释模式**
是正则跟容易阅读
(?#comment)

## 正则断言
 
在我们进行正则匹配的过程中，有些情况下，我们需要对匹配的**文本的位置**有一定的要求。 正则提供断言的方式用于匹配位置。

### **单词边界**

**\b**：理解为边界（Boundary），正则中可以表示为单词的边界

### **行的开始/结束**

使用^和$进行位置界定每行的开始和结束，匹配要求的内容以行首或行尾出现。比如**日志起始行判断，输入数据校验**

### **环视**

环视要求匹配**部分**前面或后面要满足某种规则，**零宽断言**

**?<=Y**：肯定逆序环视，左边是Y
**?<!Y**：否定逆序环视，左边不是Y
**?=Y**：肯定顺序环视，右边是Y
**?!=Y**：否定顺序环视，右边不是Y

